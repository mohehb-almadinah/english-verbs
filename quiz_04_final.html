
<!DOCTYPE html>

<html lang="ar">
<head>
<meta charset="utf-8"/>
<title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¦ÙŠ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    body { font-family: sans-serif; background-color: #f1f8e9; text-align: center; padding: 30px; direction: rtl; }
    h1 { color: #33691e; }
    .question-box, .intro-box, .result-box {
      background: #ffffff; padding: 20px; border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin: 20px auto;
      width: 90%; max-width: 500px;
    }
    button {
      padding: 10px 20px; font-size: 18px; margin: 10px;
      background-color: #689f38; color: white;
      border: none; border-radius: 8px; cursor: pointer;
    }
    button:hover { background-color: #558b2f; }
    .feedback { font-size: 20px; margin-top: 15px; min-height: 30px; }
    .hidden { display: none; }
    input[type="text"] {
      padding: 10px; font-size: 18px; width: 80%;
      margin-top: 10px; border-radius: 8px;
      border: 1px solid #ccc; text-align: center;
    }
    table { width: 100%; border-collapse: collapse; font-size: 18px; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    .summary { text-align: center; direction: rtl; }
  </style>
</head>
<body>
<h1>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¦ÙŠ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©</h1>
<div class="intro-box" id="introBox">
<h2>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</h2>
<input id="studentName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨" type="text"/>
<br/><br/>
<button id="startButton">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>
<div class="question-box hidden" id="quizBox">
<h2 id="questionNumber"></h2>
<h3 id="question"></h3>
<div id="choices"></div>
<div class="feedback" id="feedback"></div>
<button id="nextBtn" onclick="nextQuestion()">â¡ï¸ Ø§Ù„ØªØ§Ù„ÙŠ</button>
<button class="hidden" id="submitBtn" onclick="submitQuiz()">ğŸ“¤ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
<button id="prevBtn" onclick="prevQuestion()">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
</div>
<div class="question-box hidden" id="reviewSlide">
<h2>ğŸ“‹ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ</h2>
<p>ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ù‚Ø¨Ù„ Ø§Ù„ØªØ³Ù„ÙŠÙ….</p>
<button onclick="prevFromReview()">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
<button onclick="reviewAnswers()">ğŸ” Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
<button onclick="submitQuiz()">ğŸ“¤ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>
<div class="result-box hidden" id="resultBox">
<h2 id="score"></h2><button class="hidden" id="downloadCertificateBtn" onclick="generatePDF(student)">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ PDF</button>
<div class="summary" id="summary"></div>
</div>
<button onclick="location.href='index.html'">ğŸ  Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<script>
const originalQuizData = [
  { word: "pull", correct: "ÙŠØ³Ø­Ø¨", options: ["ÙŠØ¨Ù‚Ù‰", "ÙŠØ³Ø­Ø¨", "ÙŠØªØ°ÙƒØ±"] },
  { word: "push", correct: "ÙŠØ¯ÙØ¹", options: ["ÙŠØ¯ÙØ¹", "ÙŠØ¯Ø±Ø³", "ÙŠØ³Ø­Ø¨"] },
  { word: "remember", correct: "ÙŠØªØ°ÙƒØ±", options: ["ÙŠØ¯ÙØ¹", "ÙŠØ­ÙØ¸", "ÙŠØªØ°ÙƒØ±"] },
  { word: "save", correct: "ÙŠØ­ÙØ¸", options: ["ÙŠØ¨Ù‚Ù‰", "ÙŠØ­ÙØ¸", "ÙŠØ³Ø­Ø¨"] },
  { word: "shout", correct: "ÙŠØµØ±Ø®", options: ["ÙŠØ¯ÙØ¹", "ÙŠØµØ±Ø®", "ÙŠØªØ­Ø¯Ø«"] },
  { word: "smell", correct: "ÙŠØ´Ù…", options: ["ÙŠØ´Ù…", "ÙŠØ¯Ø±Ø³", "ÙŠØ­ÙØ¸"] },
  { word: "smile", correct: "ÙŠØ¨ØªØ³Ù…", options: ["ÙŠØ¯ÙØ¹", "ÙŠØ­ÙØ¸", "ÙŠØ¨ØªØ³Ù…"] },
  { word: "stay", correct: "ÙŠØ¨Ù‚Ù‰", options: ["ÙŠØ¨Ù‚Ù‰", "ÙŠØ´Ù…", "ÙŠØ³Ø­Ø¨"] },
  { word: "study", correct: "ÙŠØ¯Ø±Ø³", options: ["ÙŠØ¨Ù‚Ù‰", "ÙŠØ¯Ø±Ø³", "ÙŠØªØ­Ø¯Ø«"] },
  { word: "talk", correct: "ÙŠØªØ­Ø¯Ø«", options: ["ÙŠØ¨Ù‚Ù‰", "ÙŠØ¯Ø±Ø³", "ÙŠØªØ­Ø¯Ø«"] },
];
let quizData = [];
let current = 0;
let answers = [];
let choicesOrder = [];
let student = "";

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

document.getElementById("startButton").addEventListener("click", startQuiz);

function startQuiz() {
  const name = document.getElementById("studentName").value.trim();
  if (!name) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡.");
    return;
  }
  student = name;
  quizData = shuffle([...originalQuizData]);
  answers = Array(quizData.length).fill(null);
  choicesOrder = quizData.map(q => shuffle([...q.options]));
  document.getElementById("introBox").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  loadQuestion();
}

function loadQuestion() {
  const q = quizData[current];
  document.getElementById("questionNumber").textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${current + 1} Ù…Ù† ${quizData.length}`;
  document.getElementById("question").textContent = `Ù…Ø§ ØªØ±Ø¬Ù…Ø©: "${q.word}"ØŸ`;
  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";
  choicesOrder[current].forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option;
    if (answers[current] === option) btn.style.border = "3px solid black";
    btn.onclick = () => { answers[current] = option; loadQuestion(); };
    choicesDiv.appendChild(btn);
  });

  document.getElementById("nextBtn").classList.toggle("hidden", current === quizData.length - 1);
  
  document.getElementById("feedback").innerHTML = "";
  
  document.getElementById("submitBtn").classList.toggle("hidden", current !== quizData.length - 1);
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
    
    
}

function nextQuestion() {
  if (current < quizData.length - 1) {
    current++;
    loadQuestion();
  } else {
    document.getElementById("quizBox").classList.add("hidden");
    document.getElementById("reviewSlide").classList.remove("hidden");
  }
}

function prevQuestion() {
  if (current > 0) {
    current--;
    loadQuestion();
  }
}

function reviewAnswers() {
  let table = "<table><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th></tr>";
  quizData.forEach((q, i) => {
    const answer = answers[i] || "Ù„Ù… ØªÙØ¬Ø¨";
    table += `<tr><td>${i + 1}. ${q.word}</td><td>${answer}</td></tr>`;
  });
  table += "</table>";
  
  document.getElementById("feedback").innerHTML = "";
  
  document.getElementById("submitBtn").classList.toggle("hidden", current !== quizData.length - 1);
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
    
    
  document.getElementById("reviewSlide").insertAdjacentHTML("beforeend", table);
}


function submitQuiz() {
  if (answers.includes(null)) {
    alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‚Ø¨Ù„ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.");
    return;
  }
    
  let score = 0;
  for (let i = 0; i < quizData.length; i++) {
    if (answers[i] === quizData[i].correct) score++;
  }

  document.getElementById("quizBox").classList.add("hidden");
  const finalScore = document.getElementById("score");
  finalScore.innerHTML = `<strong>${student}</strong>ØŒ Ù†ØªÙŠØ¬ØªÙƒ: <strong>${score} Ù…Ù† ${quizData.length}</strong>`;
  if (score >= 8) {
    finalScore.innerHTML += '<br><span style="color:green; font-size: 24px;">Ø£Ø­Ø³Ù†ØªØŒ Ø§Ø³ØªÙ…Ø± ÙˆÙˆÙÙ‚Ùƒ Ø§Ù„Ù„Ù‡ ğŸŒŸ</span>';
  } else {
    finalScore.innerHTML += '<br><span style="color:red; font-size: 24px;">ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±Ø³ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</span>';
  }

  const summary = document.getElementById("summary");
  let table = "<table><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th></tr>";
  quizData.forEach((q, i) => {
    const answer = answers[i] || "Ù„Ù… ØªÙØ¬Ø¨";
    const isCorrect = answer === q.correct;
    table += `<tr>
      <td>${i + 1}. ${q.word}</td>
      <td>${answer}</td>
      <td style="color:${isCorrect ? 'green' : 'red'}">
        ${isCorrect ? "âœ… ØµØ­ÙŠØ­Ø©" : `âŒ Ø®Ø§Ø·Ø¦Ø© (Ø§Ù„ØµØ­ÙŠØ­: ${q.correct})`}
      </td>
    </tr>`;
  });
  table += "</table>";
  summary.innerHTML = table;
  document.getElementById("resultBox").classList.remove("hidden");
if (score >= 8) document.getElementById("downloadCertificateBtn").classList.remove("hidden");
}

function prevFromReview() {
  document.getElementById("reviewSlide").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  current = quizData.length - 1;
  loadQuestion();
}
</script>
<script>
function generatePDF(studentName) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const image = new Image();
    image.src = "certificate1_background4.png";

    image.onload = function () {
        doc.addImage(image, "PNG", 0, 0, 210, 297);

        doc.setFont("Helvetica", "bold");
        doc.setFontSize(24);
        doc.setTextColor(255, 0, 0);
        doc.text("Ø´Ù‡Ø§Ø¯Ø© Ù†Ø¬Ø§Ø­", 105, 50, { align: "center" });

        doc.setFontSize(16);
        doc.setTextColor(0, 0, 0);
        doc.text("ØªØ´Ù‡Ø¯ Ø¨ÙˆØ§Ø¨Ø© ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", 105, 70, { align: "center" });
        doc.text("Ø£Ù† Ø§Ù„Ø·Ø§Ù„Ø¨:", 105, 80, { align: "center" });

        doc.setFont("Helvetica", "bold");
        doc.setFontSize(20);
        doc.text(studentName, 105, 90, { align: "center" });

        doc.setFont("Helvetica", "normal");
        doc.setFontSize(16);
        doc.setTextColor(0, 128, 0);
        doc.text("Ù‚Ø¯ Ø§Ø¬ØªØ§Ø² Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¦ÙŠ â€“ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ù¤ Ø¨Ù†Ø¬Ø§Ø­", 105, 110, { align: "center" });
        doc.text("ÙˆÙ†ØªÙ…Ù†Ù‰ Ù„Ù‡ Ø¯ÙˆØ§Ù… Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙˆØ§Ù„Ù†Ø¬Ø§Ø­", 105, 120, { align: "center" });

        doc.setTextColor(0, 0, 0);
        doc.text("ğŸ“˜ Ù…Ø¯ÙŠØ± Ø¨ÙˆØ§Ø¨Ø© ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", 105, 250, { align: "center" });
        doc.text("Ø¯. Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ", 105, 260, { align: "center" });

        const today = new Date();
        const formattedDate = `${today.getDate()}/${today.getMonth() + 1}/${today.getFullYear()}`;
        doc.setFontSize(12);
        doc.text(formattedDate, 105, 280, { align: "center" });

        doc.save("certificate.pdf");
    };

    image.onerror = function () {
        alert("âŒ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ØµÙˆØ±Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ø³Ù… certificate1_background4.png");
    };
}
</script></body>
</html>
