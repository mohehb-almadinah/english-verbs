
<!DOCTYPE html>

<html lang="ar">
<head>
<meta charset="utf-8"/>
<title>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµÙˆØªÙŠ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
  body { font-family: sans-serif; background-color: #f0f8ff; direction: rtl; text-align: center; padding: 30px; }
  .box { background: white; border-radius: 15px; box-shadow: 0 0 10px #ccc; padding: 20px; margin: auto; max-width: 600px; }
  button { font-size: 20px; padding: 10px 25px; margin: 10px; background-color: #1976d2; color: white; border: none; border-radius: 8px; cursor: pointer; }
  button:hover { background-color: #0d47a1; }
  .hidden { display: none; }
  audio { margin: 20px; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 10px; }
</style>
</head>
<body>
<h1>ğŸ§ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµÙˆØªÙŠ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</h1>
<div class="box" id="introBox">
<h2>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ±Ù‚Ù…Ùƒ Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ø¨Ø¯Ø¡:</h2>
<input id="studentName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨" style="font-size:18px; padding:10px; width:80%; border-radius:8px; border:1px solid #ccc;" type="text"/>
<br/><br/>
<input id="studentCode" maxlength="4" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ (Ø£Ø±Ø¨Ø¹ Ø®Ø§Ù†Ø§Øª)" style="font-size:18px; padding:10px; width:80%; border-radius:8px; border:1px solid #ccc;" type="password"/>
<br/><br/>
<button onclick="startQuiz()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>
<div class="box hidden" id="quizBox"><div id="timer" style="font-size:20px; font-weight:bold; color:#d32f2f; margin-bottom:15px;">â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 05:00</div>
<h2 id="questionTitle"></h2>
<audio controls="" id="audioPlayer"></audio>
<div id="optionsContainer"></div>
<div style="margin-top:20px;">
<button id="nextBtn" onclick="nextQuestion()">â¡ï¸ Ø§Ù„ØªØ§Ù„ÙŠ</button>
<button id="prevBtn" onclick="prevQuestion()">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
<button class="hidden" id="submitBtn" onclick="submitQuiz()">ğŸ“¤ ØªØ³Ù„ÙŠÙ…</button>
</div>
</div>
<div class="box hidden" id="resultBox">
<h2 id="score"></h2>
<div id="summary"></div>
</div>
<script>
let timerInterval;
let timeLeft = 300; // 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ

function startTimer() {
  const timerDisplay = document.getElementById("timer");
  timerInterval = setInterval(() => {
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      alert("Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.");
      submitQuiz();
      return;
    }
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    timerDisplay.textContent = "â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: " + 
      String(minutes).padStart(2, '0') + ":" + String(seconds).padStart(2, '0');
    timeLeft--;
  }, 1000);
}



let quizData = [
  ["agree", "ÙŠÙˆØ§ÙÙ‚", ["ÙŠÙ†Ø¸Ù", "ÙŠÙˆØ§ÙÙ‚", "ÙŠØ¬ÙŠØ¨"]],
  ["cook", "ÙŠØ·Ø¨Ø®", ["ÙŠØ³Ø£Ù„", "ÙŠØ·Ø¨Ø®", "ÙŠØµÙ„"]],
  ["call", "ÙŠØªØµÙ„", ["ÙŠØªØµÙ„", "ÙŠØ³Ø£Ù„", "ÙŠØºÙ„Ù‚"]],
  ["clean", "ÙŠÙ†Ø¸Ù", ["ÙŠØªØ³Ù„Ù‚", "ÙŠØ·Ø¨Ø®", "ÙŠÙ†Ø¸Ù"]],
  ["close", "ÙŠØºÙ„Ù‚", ["ÙŠØªØ´Ø§Ø¬Ø±", "ÙŠØ·Ø¨Ø®", "ÙŠØºÙ„Ù‚"]],
  ["answer", "ÙŠØ¬ÙŠØ¨", ["ÙŠØªØ´Ø§Ø¬Ø±", "ÙŠØ¬ÙŠØ¨", "ÙŠØ³Ø£Ù„"]],
  ["ask", "ÙŠØ³Ø£Ù„", ["ÙŠØ³Ø£Ù„", "ÙŠØµÙ„", "ÙŠØªØ´Ø§Ø¬Ø±"]],
  ["climb", "ÙŠØªØ³Ù„Ù‚", ["ÙŠØªØ³Ù„Ù‚", "ÙŠØºÙ„Ù‚", "ÙŠØ¬ÙŠØ¨"]],
  ["arrive", "ÙŠØµÙ„", ["ÙŠÙˆØ§ÙÙ‚", "ÙŠØµÙ„", "ÙŠØªØµÙ„"]],
  ["argue", "ÙŠØªØ´Ø§Ø¬Ø±", ["ÙŠØµÙ„", "ÙŠØªØ´Ø§Ø¬Ø±", "ÙŠÙˆØ§ÙÙ‚"]]
];

quizData = quizData.sort(() => Math.random() - 0.5);
let current = 0;
let answers = Array(quizData.length).fill(null);
let student = "";
let usedCodes = new Set();

let validCodes = {
  "4832": "ØµØ§Ù„Ø­",
  "7261": "ÙÙŠØµÙ„",
  "3397": "Ø£Ø­Ù…Ø¯",
  "1904": "Ù…Ø­Ù…Ø¯",
  "8773": "Ù†ÙˆÙ",
  "6532": "Ø£ÙÙ†Ø§Ù†",
  "2048": "Ø«Ø§Ù…Ø±"
};

function startQuiz() {
  const name = document.getElementById("studentName").value.trim();
  const code = document.getElementById("studentCode").value.trim();

  if (!name || !code) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ.");
    return;
  }

  if (code.length !== 4 || !/^\d{4}$/.test(code)) {
    alert("ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù…Ù† Ø£Ø±Ø¨Ø¹ Ø®Ø§Ù†Ø§Øª Ø±Ù‚Ù…ÙŠØ©.");
    return;
  }

  if (!(code in validCodes)) {
    alert("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­.");
    return;
  }

  if (usedCodes.has(code)) {
    alert("ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù…Ø³Ø¨Ù‚Ø§Ù‹.");
    return;
  }

  if (validCodes[code] !== name) {
    alert("Ø§Ù„Ø§Ø³Ù… Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ.");
    return;
  }

  usedCodes.add(code);
  student = name;
  document.getElementById("introBox").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  loadQuestion();
  startTimer();
}

function loadQuestion() {
  const q = quizData[current];
  document.getElementById("questionTitle").textContent = "Ø§Ù„Ø³Ø¤Ø§Ù„ " + (current + 1) + " Ù…Ù† " + quizData.length + ": Ù…Ø§ ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø³Ù…ÙˆØ¹Ø©ØŸ";
  const audio = document.getElementById("audioPlayer");
  audio.src = "audio/" + q[0] + ".mp3";

  const container = document.getElementById("optionsContainer");
  container.innerHTML = "";
  q[2].forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option;
    btn.onclick = () => { answers[current] = option; loadQuestion(); };
    if (answers[current] === option) btn.style.border = "3px solid black";
    container.appendChild(btn);
  });

  document.getElementById("prevBtn").style.display = current > 0 ? "inline-block" : "none";
  document.getElementById("nextBtn").style.display = current < quizData.length - 1 ? "inline-block" : "none";
  document.getElementById("submitBtn").classList.toggle("hidden", current !== quizData.length - 1);
}

function nextQuestion() { if (current < quizData.length - 1) { current++; loadQuestion(); } }
function prevQuestion() { if (current > 0) { current--; loadQuestion(); } }

function submitQuiz() {
  if (answers.includes(null)) { alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©."); return; }
  document.getElementById("quizBox").classList.add("hidden");
  const resultBox = document.getElementById("resultBox");
  const scoreElem = document.getElementById("score");
  let score = 0;

  let summary = "<table><tr><th>Ø§Ù„ÙƒÙ„Ù…Ø©</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th></tr>";
  quizData.forEach((q, i) => {
    const correct = q[1];
    const userAnswer = answers[i];
    const isCorrect = userAnswer === correct;
    if (isCorrect) score++;
    summary += '<tr><td>' + q[0] + '</td><td>' + userAnswer + '</td><td style="color:' + (isCorrect ? 'green' : 'red') + '">' +
               (isCorrect ? 'âœ… ØµØ­ÙŠØ­Ø©' : 'âŒ Ø®Ø§Ø·Ø¦Ø© (Ø§Ù„ØµØ­ÙŠØ­: ' + correct + ')') + '</td></tr>';
  });
  summary += "</table>";
  scoreElem.innerHTML = "<strong>" + student + "</strong>ØŒ Ù†ØªÙŠØ¬ØªÙƒ: <strong>" + score + " Ù…Ù† " + quizData.length + "</strong><br>" +
    (score >= 8 ? '<span style="color:green; font-size: 20px;">Ø£Ø­Ø³Ù†Øª! ğŸŒŸ</span>' : '<span style="color:red; font-size: 20px;">ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±Ø³.</span>');
  document.getElementById("summary").innerHTML = summary;
  resultBox.classList.remove("hidden");
}
</script>
<div style="margin-top: 40px;">
<button onclick="location.href='index.html'" style="background-color:#9e9e9e;">ğŸ  Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>
</body>
</html>
