
<!DOCTYPE html>

<html lang="ar">
<head>
<meta charset="utf-8"/>
<title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµÙˆØªÙŠ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    body { font-family: sans-serif; background-color: #f1f8e9; text-align: center; padding: 30px; direction: rtl; }
    h1 { color: #33691e; }
    .question-box, .intro-box, .result-box {
      background: #ffffff; padding: 20px; border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin: 20px auto;
      width: 90%; max-width: 500px;
    }
    button {
      padding: 10px 20px; font-size: 18px; margin: 10px;
      background-color: #689f38; color: white;
      border: none; border-radius: 8px; cursor: pointer;
    }
    button:hover { background-color: #558b2f; }
    .feedback { font-size: 20px; margin-top: 15px; min-height: 30px; }
    .hidden { display: none; }
    input[type="text"] {
      padding: 10px; font-size: 18px; width: 80%;
      margin-top: 10px; border-radius: 8px;
      border: 1px solid #ccc; text-align: center;
    }
    table { width: 100%; border-collapse: collapse; font-size: 18px; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    .summary { text-align: center; direction: rtl; }
  </style>
</head>
<body>
<h1>ğŸ§ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµÙˆØªÙŠ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©</h1>
<div class="intro-box" id="introBox">
<h2>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</h2>
<input id="studentName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨" type="text"/><br/><br/>
<input id="accessCode" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ" type="password" style="padding: 10px; font-size: 18px; width: 80%; margin-top: 10px; border-radius: 8px; border: 1px solid #ccc; text-align: center;"/><br/><br/>
<button id="startButton">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>
<div class="question-box hidden" id="quizBox">
<h2 id="questionNumber"></h2>
<h3 id="question"></h3>
<div id="choices"></div>
<div class="feedback" id="feedback"></div>
<button id="nextBtn" onclick="nextQuestion()">â¡ï¸ Ø§Ù„ØªØ§Ù„ÙŠ</button>
<button class="hidden" id="submitBtn" onclick="submitQuiz()" style="background-color: red;">ğŸ“¤ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
<button class="hidden" id="reviewBeforeBtn" onclick="reviewBeforeSubmit()" style="background-color: #1976d2;">ğŸ” Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªØ³Ù„ÙŠÙ…</button>
<button id="prevBtn" onclick="prevQuestion()">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
</div>
<div class="question-box hidden" id="reviewSlide">
<h2>ğŸ“‹ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ</h2>
<p>ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ù‚Ø¨Ù„ Ø§Ù„ØªØ³Ù„ÙŠÙ….</p>
<button onclick="prevFromReview()">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
<button onclick="submitQuiz()" style="background-color: red;">ğŸ“¤ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>
<div class="result-box hidden" id="resultBox">
<h2 id="score"></h2>
<div class="summary" id="summary"></div>
</div>
<div id="homeButtonBox"><button onclick="location.href='index.html'">ğŸ  Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button></div>
<script>
const originalQuizData = [
  { audio: "https://dict.youdao.com/dictvoice?audio=be", correct: "ÙŠÙƒÙˆÙ†", options: ["ÙŠÙƒÙˆÙ†", "ÙŠÙƒØ³Ø±", "ÙŠØ´Ø¹Ø±"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=become", correct: "ÙŠØµØ¨Ø­", options: ["ÙŠØµØ¨Ø­", "ÙŠØ´ØªØ±ÙŠ", "ÙŠØ´Ø¹Ø±"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=begin", correct: "ÙŠØ¨Ø¯Ø£", options: ["ÙŠÙ‚Ø±Ø£", "ÙŠØ¨Ø¯Ø£", "ÙŠØ±ÙƒØ¨"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=break", correct: "ÙŠÙƒØ³Ø±", options: ["ÙŠÙ…Ø³Ùƒ", "ÙŠÙƒØ³Ø±", "ÙŠØ£ØªÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=bring", correct: "ÙŠØ¬Ù„Ø¨", options: ["ÙŠÙ†ÙÙ‚", "ÙŠØ¬Ù„Ø¨", "ÙŠÙ‚ÙˆØ¯"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=build", correct: "ÙŠØ¨Ù†ÙŠ", options: ["ÙŠØ¨Ù†ÙŠ", "ÙŠÙÙƒØ±", "ÙŠØ­ØªÙØ¸"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=buy", correct: "ÙŠØ´ØªØ±ÙŠ", options: ["ÙŠØ¬Ù„Ø¨", "ÙŠØ´ØªØ±ÙŠ", "ÙŠÙƒÙˆÙ†"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=can", correct: "ÙŠØ³ØªØ·ÙŠØ¹", options: ["ÙŠØ¨Ø¯Ø£", "ÙŠØ³ØªØ·ÙŠØ¹", "ÙŠØ´ØªØ±ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=catch", correct: "ÙŠÙ…Ø³Ùƒ", options: ["ÙŠØµØ¨Ø­", "ÙŠÙ…Ø³Ùƒ", "ÙŠÙÙ‡Ù…"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=choose", correct: "ÙŠØ®ØªØ§Ø±", options: ["ÙŠØ®Ø³Ø±", "ÙŠØ®ØªØ§Ø±", "ÙŠØ¬Ø±ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=come", correct: "ÙŠØ£ØªÙŠ", options: ["ÙŠÙÙƒØ±", "ÙŠØ£ØªÙŠ", "ÙŠØ¨Ø¯Ø£"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=cut", correct: "ÙŠÙ‚Ø·Ø¹", options: ["ÙŠÙ‚Ø·Ø¹", "ÙŠØ¶Ø¹", "ÙŠØ®Ø³Ø±"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=do", correct: "ÙŠÙØ¹Ù„", options: ["ÙŠÙƒÙˆÙ†", "ÙŠØ³Ù…Ø¹", "ÙŠÙØ¹Ù„"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=draw", correct: "ÙŠØ±Ø³Ù…", options: ["ÙŠÙ‚Ø±Ø£", "ÙŠÙ†Ø§Ù…", "ÙŠØ±Ø³Ù…"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=drink", correct: "ÙŠØ´Ø±Ø¨", options: ["ÙŠØ¶Ø¹", "ÙŠØ´Ø±Ø¨", "ÙŠØºÙ†ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=drive", correct: "ÙŠÙ‚ÙˆØ¯", options: ["ÙŠØ¨Ø¯Ø£", "ÙŠØ¯ÙØ¹", "ÙŠÙ‚ÙˆØ¯"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=eat", correct: "ÙŠØ£ÙƒÙ„", options: ["ÙŠÙ‚Ù", "ÙŠØ£ÙƒÙ„", "ÙŠØ¨Ù†ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=feel", correct: "ÙŠØ´Ø¹Ø±", options: ["ÙŠØ¹Ø·ÙŠ", "ÙŠØ´Ø¹Ø±", "ÙŠØ£ØªÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=find", correct: "ÙŠØ¬Ø¯", options: ["ÙŠØ¬Ù„Ø¨", "ÙŠØ¬Ø¯", "ÙŠÙ‚Ù"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=forget", correct: "ÙŠÙ†Ø³Ù‰", options: ["ÙŠÙ†Ø³Ù‰", "ÙŠÙÙƒØ±", "ÙŠØ¬Ø±ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=get", correct: "ÙŠØ­ØµÙ„", options: ["ÙŠØ­ØµÙ„", "ÙŠÙØ¹Ù„", "ÙŠÙ‚ÙˆÙ„"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=give", correct: "ÙŠØ¹Ø·ÙŠ", options: ["ÙŠØ¹Ø·ÙŠ", "ÙŠÙƒÙˆÙ†", "ÙŠØ°Ù‡Ø¨"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=go", correct: "ÙŠØ°Ù‡Ø¨", options: ["ÙŠØ¯ÙØ¹", "ÙŠÙ‚Ø±Ø£", "ÙŠØ°Ù‡Ø¨"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=grow", correct: "ÙŠÙ†Ù…Ùˆ", options: ["ÙŠÙ†Ù…Ùˆ", "ÙŠØ±Ø³Ù„", "ÙŠØ¬Ø¯"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=have", correct: "ÙŠÙ…Ù„Ùƒ", options: ["ÙŠØ®Ø³Ø±", "ÙŠÙ…Ù„Ùƒ", "ÙŠÙ‚Ø±Ø£"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=hear", correct: "ÙŠØ³Ù…Ø¹", options: ["ÙŠÙ‚Ø±Ø£", "ÙŠØ³Ù…Ø¹", "ÙŠØ¹Ø±Ù"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=hold", correct: "ÙŠÙ…Ø³Ùƒ", options: ["ÙŠÙ…Ø³Ùƒ", "ÙŠØ¨Ø¯Ø£", "ÙŠÙƒÙˆÙ†"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=keep", correct: "ÙŠØ­ØªÙØ¸", options: ["ÙŠØµØ¨Ø­", "ÙŠØ­ØªÙØ¸", "ÙŠÙØ¹Ù„"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=know", correct: "ÙŠØ¹Ø±Ù", options: ["ÙŠØ´Ø¹Ø±", "ÙŠØ¹Ø±Ù", "ÙŠÙ†Ø§Ù…"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=leave", correct: "ÙŠØªØ±Ùƒ", options: ["ÙŠÙƒÙˆÙ†", "ÙŠØ´ØªØ±ÙŠ", "ÙŠØªØ±Ùƒ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=lose", correct: "ÙŠØ®Ø³Ø±", options: ["ÙŠØ°Ù‡Ø¨", "ÙŠØ¯ÙØ¹", "ÙŠØ®Ø³Ø±"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=make", correct: "ÙŠØµÙ†Ø¹", options: ["ÙŠØµÙ†Ø¹", "ÙŠØ¨Ù†ÙŠ", "ÙŠØ­ØªÙØ¸"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=pay", correct: "ÙŠØ¯ÙØ¹", options: ["ÙŠÙ‚Ø±Ø£", "ÙŠØ¬Ù„Ø¨", "ÙŠØ¯ÙØ¹"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=put", correct: "ÙŠØ¶Ø¹", options: ["ÙŠØµØ¨Ø­", "ÙŠØ¶Ø¹", "ÙŠØ­ØµÙ„"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=read", correct: "ÙŠÙ‚Ø±Ø£", options: ["ÙŠØ®Ø¨Ø±", "ÙŠØ¨Ø¯Ø£", "ÙŠÙ‚Ø±Ø£"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=ride", correct: "ÙŠØ±ÙƒØ¨", options: ["ÙŠÙ…Ø³Ùƒ", "ÙŠØ±ÙƒØ¨", "ÙŠØ°Ù‡Ø¨"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=run", correct: "ÙŠØ¬Ø±ÙŠ", options: ["ÙŠÙ…Ø³Ùƒ", "ÙŠØ¬Ù„Ø¨", "ÙŠØ¬Ø±ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=say", correct: "ÙŠÙ‚ÙˆÙ„", options: ["ÙŠØºÙ†ÙŠ", "ÙŠÙ‚ÙˆÙ„", "ÙŠÙ†Ù…Ùˆ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=see", correct: "ÙŠØ±Ù‰", options: ["ÙŠØ±Ø³Ù„", "ÙŠÙƒØ³Ø±", "ÙŠØ±Ù‰"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=sell", correct: "ÙŠØ¨ÙŠØ¹", options: ["ÙŠØ¨ÙŠØ¹", "ÙŠÙ†Ø³Ù‰", "ÙŠÙ‚Ø±Ø£"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=send", correct: "ÙŠØ±Ø³Ù„", options: ["ÙŠØ±Ø³Ù„", "ÙŠÙÙƒØ±", "ÙŠÙ…Ù„Ùƒ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=show", correct: "ÙŠØ¹Ø±Ø¶", options: ["ÙŠØ¹Ø·ÙŠ", "ÙŠÙ‚Ø±Ø£", "ÙŠØ¹Ø±Ø¶"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=sing", correct: "ÙŠØºÙ†ÙŠ", options: ["ÙŠØ±Ø³Ù„", "ÙŠØ£ØªÙŠ", "ÙŠØºÙ†ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=sleep", correct: "ÙŠÙ†Ø§Ù…", options: ["ÙŠÙƒØ³Ø±", "ÙŠØ­ØªÙØ¸", "ÙŠÙ†Ø§Ù…"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=spend", correct: "ÙŠÙ†ÙÙ‚", options: ["ÙŠÙ†ÙÙ‚", "ÙŠØºÙ†ÙŠ", "ÙŠØªØ±Ùƒ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=speak", correct: "ÙŠØªÙƒÙ„Ù…", options: ["ÙŠØ¹Ø±Ù", "ÙŠØ£Ø®Ø°", "ÙŠØªÙƒÙ„Ù…"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=stand", correct: "ÙŠÙ‚Ù", options: ["ÙŠÙ†Ø³Ù‰", "ÙŠÙ‚Ù", "ÙŠØ­ØªÙØ¸"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=take", correct: "ÙŠØ£Ø®Ø°", options: ["ÙŠØ¶Ø¹", "ÙŠØ­ØµÙ„", "ÙŠØ£Ø®Ø°"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=tell", correct: "ÙŠØ®Ø¨Ø±", options: ["ÙŠØ®Ø¨Ø±", "ÙŠØ¹Ø·ÙŠ", "ÙŠØ¯ÙØ¹"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=think", correct: "ÙŠÙÙƒØ±", options: ["ÙŠÙÙƒØ±", "ÙŠØ´Ø±Ø¨", "ÙŠØ¬Ø±ÙŠ"] },
  { audio: "https://dict.youdao.com/dictvoice?audio=understand", correct: "ÙŠÙÙ‡Ù…", options: ["ÙŠØ¯ÙØ¹", "ÙŠÙÙ‡Ù…", "ÙŠØ´Ø¹Ø±"] },
];
let quizData = [];
let current = 0;
let answers = [];
let choicesOrder = [];
let student = "";
let fromReview = false;

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

document.getElementById("startButton").addEventListener("click", startQuiz);

function startQuiz() {
  const code = document.getElementById("accessCode").value.trim();
  if (code !== "2025") {
    alert("Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.");
    return;
  }
  const name = document.getElementById("studentName").value.trim();
  if (!name) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡.");
    return;
  }
  student = name;
  quizData = shuffle([...originalQuizData]);
  answers = Array(quizData.length).fill(null);
  choicesOrder = quizData.map(q => shuffle([...q.options]));
  document.getElementById("introBox").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  document.getElementById("homeButtonBox").style.display = "none";
  loadQuestion();
}

function loadQuestion() {
  document.getElementById("submitBtn").classList.add("hidden");
  const q = quizData[current];
  document.getElementById("questionNumber").textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${current + 1} Ù…Ù† ${quizData.length}`;
  document.getElementById("question").innerHTML = `Ù…Ø§ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„ÙƒÙ„Ù…Ø© ÙÙŠ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„ØªØ§Ù„ÙŠØŸ<br><audio controls src="${q.audio}" style="margin: 15px 0;"></audio>`;
  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";
  choicesOrder[current].forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option;
    if (answers[current] === option) btn.style.border = "3px solid black";
    btn.onclick = () => { answers[current] = option; loadQuestion(); };
    choicesDiv.appendChild(btn);
  });

  
  
if (fromReview) {
  document.getElementById("reviewBeforeBtn").classList.remove("hidden");
  document.getElementById("nextBtn").classList.add("hidden");
  document.getElementById("prevBtn").classList.add("hidden");
  return;
} else {
  if (current === quizData.length - 1) {
    document.getElementById("reviewBeforeBtn").classList.remove("hidden");
  } else {
    document.getElementById("reviewBeforeBtn").classList.add("hidden");
  }
  document.getElementById("nextBtn").classList.toggle("hidden", current === quizData.length - 1);
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
}
  
  document.getElementById("feedback").innerHTML = "";
  
  
            
  
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
    
    
}

function nextQuestion() {
  if (current < quizData.length - 1) {
    current++;
    loadQuestion();
  } else {
  if (current === quizData.length - 1) {
    document.getElementById("reviewBeforeBtn").classList.remove("hidden");
  } else {
    document.getElementById("reviewBeforeBtn").classList.add("hidden");
  }
  document.getElementById("nextBtn").classList.toggle("hidden", current === quizData.length - 1);
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
}
}

function prevQuestion() {
  if (current > 0) {
    current--;
    loadQuestion();
  }
}

function reviewAnswers() {
  let table = "<table><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th></tr>";
  quizData.forEach((q, i) => {
    const answer = answers[i] || "Ù„Ù… ØªÙØ¬Ø¨";
    table += `<tr><td>${i + 1}. <audio controls src="${q.audio}" style="height:30px;"></audio></td><td>${answer}</td></tr>`;
  });
  table += "</table>";
  
  document.getElementById("feedback").innerHTML = "";
  
  
            
  
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
    
    
  document.getElementById("reviewSlide").insertAdjacentHTML("beforeend", table);
}


function submitQuiz() {
  fromReview = false;
  const unanswered = answers.map((a, i) => a === null ? i + 1 : null).filter(v => v !== null);
  if (unanswered.length > 0) {
    
  }

  if (answers.includes(null)) {
    
  }
    
  let score = 0;
  for (let i = 0; i < quizData.length; i++) {
    if (answers[i] === quizData[i].correct) score++;
  }

  document.getElementById("quizBox").classList.add("hidden");
  document.getElementById("reviewSlide").classList.add("hidden");
  const finalScore = document.getElementById("score");
  finalScore.innerHTML = `<strong>${student}</strong>ØŒ Ù†ØªÙŠØ¬ØªÙƒ: <strong>${score} Ù…Ù† ${quizData.length}</strong>`;
  if (score >= 45) {
    finalScore.innerHTML += '<br><span style="color:green; font-size: 24px;">Ø£Ø­Ø³Ù†ØªØŒ Ø§Ø³ØªÙ…Ø± ÙˆÙˆÙÙ‚Ùƒ Ø§Ù„Ù„Ù‡ ğŸŒŸ</span>';
  finalScore.innerHTML += `<br><button onclick="generateCertificate(student)">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ (PDF)</button>`;
  
  
  } else {
  if (current === quizData.length - 1) {
    document.getElementById("reviewBeforeBtn").classList.remove("hidden");
  } else {
    document.getElementById("reviewBeforeBtn").classList.add("hidden");
  }
  document.getElementById("nextBtn").classList.toggle("hidden", current === quizData.length - 1);
  document.getElementById("prevBtn").classList.toggle("hidden", current === 0);
}

  const summary = document.getElementById("summary");
  let table = "<table><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th></tr>";
  quizData.forEach((q, i) => {
    const answer = answers[i] || "Ù„Ù… ØªÙØ¬Ø¨";
    const isCorrect = answer === q.correct;
    table += `<tr>
      <td>${i + 1}. <audio controls src="${q.audio}" style="height:30px;"></audio></td>
      <td>${answer}</td>
      <td style="color:${isCorrect ? 'green' : 'red'}">
        ${isCorrect ? "âœ… ØµØ­ÙŠØ­Ø©" : `âŒ Ø®Ø§Ø·Ø¦Ø© (Ø§Ù„ØµØ­ÙŠØ­: ${q.correct})`}
      </td>
    </tr>`;
  });
  table += "</table>";
  summary.innerHTML = table;
  document.getElementById("resultBox").classList.remove("hidden");
  if (score < 45) {
    summary.insertAdjacentHTML("afterbegin", "<p style='color:red; font-size:20px;'><strong>Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨ØŒ ØªØ³ØªØ·ÙŠØ¹ Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¥Ø¬ØªÙŠØ§Ø²Ù‡ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡.</strong></p>");
  }
}

function prevFromReview() {
  document.getElementById("submitBtn").classList.add("hidden");
  fromReview = false;
  document.getElementById("reviewSlide").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  document.getElementById("homeButtonBox").style.display = "none";
  current = quizData.length - 1;
  loadQuestion();
}







function reviewBeforeSubmit() {
  document.getElementById("submitBtn").classList.remove("hidden");
    fromReview = false;
  document.getElementById("quizBox").classList.add("hidden");
  document.getElementById("reviewSlide").classList.add("hidden");
  document.getElementById("reviewSlide").classList.remove("hidden");

  const oldTable = document.querySelector("#reviewSlide table");
  if (oldTable) oldTable.remove();

  let table = "<table><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th><th>Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„</th></tr>";
  quizData.forEach((q, i) => {
    const fullQuestion = `<audio controls src='${q.audio}' style='height:30px;'></audio>`;
    const answer = answers[i];
    const answerText = answer
      ? `<strong>${answer}</strong>`
      : '<strong><span style="color:red;">Ù„Ù… ØªÙØ¬Ø¨</span></strong>';
    const goBtn = `<button onclick='goToQuestion(${i})'>â¬…ï¸ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ø³Ø¤Ø§Ù„</button>`;
    table += `<tr><td>${i + 1}. ${fullQuestion}</td><td>${answerText}</td><td>${goBtn}</td></tr>`;
  });
  table += "</table>";

  document.getElementById("reviewSlide").insertAdjacentHTML("beforeend", table);
}

function goToQuestion(index) {
  document.getElementById("submitBtn").classList.add("hidden");
  current = index;
  document.getElementById("reviewSlide").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  document.getElementById("homeButtonBox").style.display = "none";
  fromReview = true;
  loadQuestion();
}

</script>
<script>  
function generateCertificate() {
  const certificateWindow = window.open("", "_blank");
  certificateWindow.document.write(`
    <html lang="ar">
    <head>
      <meta charset="UTF-8">
      <title>Ø´Ù‡Ø§Ø¯Ø© Ù†Ø¬Ø§Ø­</title>
      <style>
        @media print {
          @page {
            size: A4 landscape;
            margin: 0;
          }
          body {
            margin: 0;
          }
        }
        body {
          font-family: 'Arial', sans-serif;
          direction: rtl;
          text-align: center;
          background-color: #f0f8e9;
          padding: 80px;
        }
        .certificate-box {
          background-color: #ffffff;
          border: 10px solid #4caf50;
          padding: 40px;
          border-radius: 20px;
          width: 100%;
          box-sizing: border-box;
          box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
        }
        h1 {
          color: #2e7d32;
          font-size: 48px;
          margin-bottom: 20px;
        }
        h2 {
          color: #1976d2;
          font-size: 36px;
          margin: 20px 0;
        }
        p {
          font-size: 24px;
          margin: 10px 0;
        }
        .footer {
          margin-top: 60px;
          font-size: 18px;
          color: #555;
        }
      </style>
    </head>
    <body>
      <div class="certificate-box">
        <h1>ğŸ“Ø´Ù‡Ø§Ø¯Ø© Ù†Ø¬Ø§Ø­ğŸ“</h1>
        <p>ØªØ´Ù‡Ø¯ Ø¨ÙˆØ§Ø¨Ø© ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£Ù† Ø§Ù„Ø·Ø§Ù„Ø¨/ Ù€Ù‡</p>
        <h2>${student}</h2>
        <p>Ù‚Ø¯ Ø§Ø¬ØªØ§Ø²/Øª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµÙˆØªÙŠ Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£ÙØ¹Ø§Ù„ ØºÙŠØ± Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø© Ø¨ØªÙ‚Ø¯ÙŠØ± Ù…Ù…ØªØ§Ø²</p>
        <p>ğŸ“˜ÙˆÙ†ØªÙ…Ù‰ Ù„Ù‡/ Ù€Ù‡Ø§ Ø¯ÙˆØ§Ù… Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙˆØ§Ù„Ù†Ø¬Ø§Ø­ğŸ“˜ </p>
        <p class="footer" style="font-weight:bold;">Ù…Ø¯ÙŠØ± Ø¨ÙˆØ§Ø¨Ø© ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</p>
        <p style="font-weight:bold;">ÙÙŠØµÙ„ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ</p>
        <p class="footer">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©: ${(new Date()).toLocaleDateString('en-GB')}</p>
      </div>
    </body>
    </html>
  `);
  certificateWindow.document.close();
  certificateWindow.print();
}





function reviewBeforeSubmit() {
  document.getElementById("submitBtn").classList.remove("hidden");
    fromReview = false;
  document.getElementById("quizBox").classList.add("hidden");
  document.getElementById("reviewSlide").classList.add("hidden");
  document.getElementById("reviewSlide").classList.remove("hidden");

  const oldTable = document.querySelector("#reviewSlide table");
  if (oldTable) oldTable.remove();

  let table = "<table><tr><th>Ø§Ù„Ø³Ø¤Ø§Ù„</th><th>Ø¥Ø¬Ø§Ø¨ØªÙƒ</th><th>Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„</th></tr>";
  quizData.forEach((q, i) => {
    const fullQuestion = `<audio controls src='${q.audio}' style='height:30px;'></audio>`;
    const answer = answers[i];
    const answerText = answer
      ? `<strong>${answer}</strong>`
      : '<strong><span style="color:red;">Ù„Ù… ØªÙØ¬Ø¨</span></strong>';
    const goBtn = `<button onclick='goToQuestion(${i})'>â¬…ï¸ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ø³Ø¤Ø§Ù„</button>`;
    table += `<tr><td>${i + 1}. ${fullQuestion}</td><td>${answerText}</td><td>${goBtn}</td></tr>`;
  });
  table += "</table>";

  document.getElementById("reviewSlide").insertAdjacentHTML("beforeend", table);
}

function goToQuestion(index) {
  document.getElementById("submitBtn").classList.add("hidden");
  current = index;
  document.getElementById("reviewSlide").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  document.getElementById("homeButtonBox").style.display = "none";
  fromReview = true;
  loadQuestion();
}

</script>
</body>
</html>
